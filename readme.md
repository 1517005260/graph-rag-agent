# GraphRAG + DeepSearch 实现与问答系统（Agent）构建

本项目聚焦于结合 **GraphRAG** 与 **私域 Deep Search** 的方式，实现可解释、可推理的智能问答系统，同时结合多 Agent 协作与知识图谱增强，构建完整的 RAG 智能交互解决方案。

> 💡 灵感来源于检索增强推理与深度搜索场景，探索 RAG 与 Agent 在未来应用中的结合路径。

## 📂 项目结构

```
graph-rag-agent/
├── agent/                  # 🤖 Agent 模块 - 核心交互层
│   ├── base.py             # Agent 基类
│   ├── graph_agent.py      # 基于图结构的 Agent
│   ├── hybrid_agent.py     # 混合搜索 Agent
│   ├── naive_rag_agent.py  # 简单向量检索 Agent
│   ├── deep_research_agent.py # 深度研究 Agent
│   ├── fusion_agent.py     # 多 Agent 协作 Agent
│   └── agent_coordinator.py # 多 Agent 协调器
├── assets/                 # 🖼️ 静态资源
│   ├── deepsearch.svg      # rag演进图
│   └── start.md            # 快速开始文档
├── build/                  # 🏗️ 知识图谱构建模块
│   ├── main.py             # 构建入口
│   ├── build_graph.py      # 基础图谱构建
│   ├── build_index_and_community.py # 索引和社区构建
│   ├── build_chunk_index.py # 文本块索引构建
│   ├── incremental/        # 增量更新子模块
│   └── incremental_update.py # 增量更新管理
├── CacheManage/            # 📦 缓存管理模块
│   ├── manager.py          # 统一缓存管理器
│   ├── backends/           # 存储后端
│   ├── models/             # 数据模型
│   └── strategies/         # 缓存键生成策略
├── community/              # 🔍 社区检测与摘要模块
│   ├── detector/           # 社区检测算法
│   └── summary/            # 社区摘要生成
├── config/                 # ⚙️ 配置模块
│   ├── neo4jdb.py          # 数据库连接管理
│   ├── prompt.py           # 提示模板
│   └── settings.py         # 全局配置
├── evaluator/              # 📊 评估系统
│   ├── core/               # 评估核心组件
│   ├── metrics/            # 评估指标实现
│   └── test/               # 评估测试脚本
├── frontend/               # 🖥️ 前端界面
│   ├── app.py              # 应用入口
│   ├── components/         # UI组件
│   └── utils/              # 前端工具
├── graph/                  # 📈 图谱构建模块
│   ├── core/               # 核心组件
│   ├── extraction/         # 实体关系提取
│   ├── indexing/           # 索引管理
│   └── processing/         # 实体处理
├── model/                  # 🧩 模型管理
│   └── get_models.py       # 模型初始化
├── processor/              # 📄 文档处理器
│   ├── document_processor.py # 文档处理核心
│   ├── file_reader.py      # 多格式文件读取
│   └── text_chunker.py     # 文本分块
├── search/                 # 🔎 搜索模块
│   ├── local_search.py     # 本地搜索
│   ├── global_search.py    # 全局搜索
│   └── tool/               # 搜索工具集
│       ├── naive_search_tool.py    # 简单搜索
│       ├── deep_research_tool.py   # 深度研究工具
│       └── reasoning/              # 推理组件
├── server/                 # 🖧 后端服务
│   ├── main.py             # FastAPI 应用入口
│   ├── models/             # 数据模型
│   ├── routers/            # API 路由
│   └── services/           # 业务逻辑
└── test/                   # 🧪 测试模块
    ├── search_with_stream.py    # 流式输出测试
    └── search_without_stream.py # 标准输出测试
```

**此外，每个模块下都有单独的readme来介绍模块的功能**



## 🚀 相关资源

- [大模型推理能力不断增强，RAG 和 Agent 何去何从](https://www.bilibili.com/video/BV1i6RNYpEwV)  
- [企业级知识图谱交互问答系统方案](https://www.bilibili.com/video/BV1U599YrE26)  
- [Jean - 用国产大模型 + LangChain + Neo4j 建图全过程](https://zhuanlan.zhihu.com/p/716089164)
- [GraphRAG vs DeepSearch？GraphRAG 提出者给你答案](https://mp.weixin.qq.com/s/FOT4pkEPHJR8xFvcVk1YFQ)

![svg](./assets/deepsearch.svg)

## ✨ 项目亮点

- **从零开始复现 GraphRAG**：完整实现了 GraphRAG 的核心功能，将知识表示为图结构
- **DeepSearch 与 GraphRAG 创新融合**：现有 DeepSearch 框架主要基于向量数据库，本项目创新性地将其与知识图谱结合
- **多 Agent 协同架构**：实现不同类型 Agent 的协同工作，提升复杂问题处理能力
- **完整评估系统**：提供 20+ 种评估指标，全方位衡量系统性能
- **增量更新机制**：支持知识图谱的动态增量构建与智能去重
- **思考过程可视化**：展示 AI 的推理轨迹，提高可解释性和透明度

## 🏁 快速开始

请参考：[快速开始文档](./assets/start.md)

## 🧰 功能模块

### 图谱构建与管理

- **多格式文档处理**：支持 TXT、PDF、MD、DOCX、DOC、CSV、JSON、YAML/YML 等格式
- **LLM 驱动的实体关系提取**：利用大语言模型从文本中识别实体与关系
- **增量更新机制**：支持已有图谱上的动态更新，智能处理冲突
- **社区检测与摘要**：自动识别知识社区并生成摘要，支持 Leiden 和 SLLPA 算法
- **一致性验证**：内置图谱一致性检查与修复机制

### GraphRAG 实现

- **多级检索策略**：支持本地搜索、全局搜索、混合搜索等多种模式
- **图谱增强上下文**：利用图结构丰富检索内容，提供更全面的知识背景
- **Chain of Exploration**：实现在知识图谱上的多步探索能力
- **社区感知检索**：根据知识社区结构优化搜索结果

### DeepSearch 融合

- **多步骤思考-搜索-推理**：支持复杂问题的分解与深入挖掘
- **证据链追踪**：记录每个推理步骤的证据来源，提高可解释性
- **思考过程可视化**：实时展示 AI 的推理轨迹
- **多路径并行搜索**：同时执行多种搜索策略，综合利用不同知识来源

### 多种 Agent 实现

- **NaiveRagAgent**：基础向量检索型 Agent，适合简单问题
- **GraphAgent**：基于图结构的 Agent，支持关系推理
- **HybridAgent**：混合多种检索方式的 Agent
- **DeepResearchAgent**：深度研究型 Agent，支持复杂问题多步推理
- **FusionGraphRAGAgent**：融合型 Agent，结合多种策略的优势

### 系统评估与监控

- **多维度评估**：包括答案质量、检索性能、图评估和深度研究评估
- **性能监控**：跟踪 API 调用耗时，优化系统性能
- **用户反馈机制**：收集用户对回答的评价，持续改进系统

### 前后端实现

- **流式响应**：支持 AI 生成内容的实时流式显示
- **交互式知识图谱**：提供 Neo4j 风格的图谱交互界面
- **调试模式**：开发者可查看执行轨迹和搜索过程
- **RESTful API**：完善的后端 API 设计，支持扩展开发

## 🖥️ 简单演示

### 终端测试各个Agent输出：

```bash
cd test/
python search_with_stream.py

# 输出：（问题均为“优秀学生要如何申请”）
======= DeepResearchAgent 流式输出 =======
已加载增强版深度研究工具

 --- 不显示思考过程 ---
性能指标 - fast_cache_check: 0.9553s

**开始深度分析您的问题**...

**正在分析您的问题**...

**正在分析相关知识社区**...
Building prefix dict from the default dictionary ...
Dumping model to file cache /tmp/jieba.cache
Loading model cost 0.980 seconds.
Prefix dict has been built successfully.

**发现潜在的深入探索方向**: 后续查询, 查询

**找到 3 个相关知识社区**

**正在构建相关知识图谱**...
构建查询图谱完成，包含 5 个实体和 0 个关系，耗时 0.11秒

**识别出核心相关实体**: ["学生", "国家奖学金", "全国学生资助管理中心"], "如何申请上海市奖学金",, [

**正在进行深度研究**...
找到了相关的知识社区信息:
该信息摘要基于华东理工大学的学生贷款和奖学金管理体系，提供以下要点：

### 奖学金及资助类型：
1. **本科生国家励志奖学金**
   - 由中央政府资助，奖励品学兼优且家庭经济困难的全日制本科学生。
   - 评审由本科生奖学金评审领导小组及党委学生工作部（处）负责。
   - 获奖信息会被记入学生学籍档案。
   - 不可与国家奖学金、上海市奖学金同时获得。
  
2. **国家奖学金**
   - 由中央政府资助，每人每年8000元。
   - 国家奖学金获奖情况需被录入学生学籍档案。
   - 可同时申请国家助学金。
   - 不可与国家励志奖学金、上海市奖学金同时获得。

3. **上海市奖学金**
   - 评审由评审委员会、评审领导小组和党委学生工作部（处）负责。
   - 条件包括：在社会主义精神文明建设中表现突出、体育竞赛显著成绩、获得全国性荣誉称号、其他表现突出情形、学科竞赛显著成绩、艺术展演显著成绩。
   - 不可与国家奖学金、国家励志奖学金同时获得。

4. **国家助学金**
   - 家庭经济困难学生可以申请，且可以同时申请国家奖学金或上海市奖学金。
   - 不可同时获得国家励志奖学金。

5. **学校优秀奖学金**
   - 奖励学业优秀的学生，国家奖学金和国家励志奖学金获奖学生可同时申请，但同年内只按最高金额发放。

### 贷款管理：
1. **国家助学贷款**
   - 由全国学生资助管理中心和中国银行股份有限公司合作管理，为学生提供国家助学贷款。
   - 借款学生需在毕业后或服务期满归还贷款本息，并在特定情况下申请贷款合同变更。

### 评审及管理：
1. **评审领导小组**
   - 由学校分管领导任组长，全面领导奖学金评审工作。
2. **评审委员会**
   - 负责具体评审工作，并提出评审意见。
3. **全国学生资助管理中心**
   - 负责分配国家奖学金和国家励志奖学金的获奖名额，并管理国家助学贷款。
4. **党委学生工作部（处）**
   - 负责组织国家奖学金和国家励志奖学金的评审工作。

此摘要提纲挚领地描述了华东理工大学在奖学金和助学贷款方面的各类政策、评审机构和管理规定。
以下提供上述信息的摘要：

节点：
1. **部门**
   - 财政部：审核资助申请并拨款。
   - 纪检监察：监督资助资金使用，确保专款专用。
   - 审计：检查和监督资助资金使用情况。
   - 学校：执行财经法规，监督资助资金，并设定相关规则。
   - 贷款银行：与学校核算利息并参与利息代偿审批。

2. **管理规定**
   - 听证规则：规范听证会程序、公正履行职责及相关纪律。
   - 学生申诉期：规定提出申诉的时间限制。
   - 家庭经济困难学生减免学费实施细则：帮助经济困难学生减免学费的细则。

3. **学生类型**
   - 休学创业的学生：学校可单独规定最长学习年限并简化休学批准程序。
   - 因病休学学生：医疗费按国家和当地规定处理。
   - 跨校联合培养项目学生：学校保留学籍并建立管理关系。
   - 休学学生：需办理手续离校，学校保留学籍，休学期满前应申请复学。

4. **学生职责**
   - 退学申请：学生因自费出国留学提交的申请。

关系：
- 学校接受审计部门和纪检监察部门的检查和监督，确保资助资金专款专用。
- 学校与贷款银行核算利息金额，并参与利息代偿申请的审批过程。
- 学校负责设定和管理学生申诉期的相关规定。
- 学校负责制定和更新听证规则。

通过Chain of Exploration探索路径发现:
- 步骤0: 实体 "优秀学生申请国家奖学金的条件", (初始实体)
- 步骤0: 实体 ["学生", "国家奖学金", "全国学生资助管理中心"] (初始实体)

可能的深入探索方向:
- 后续查询
- 查询
- 优秀学生申请国家奖学金的条件
**正在分析您的问题**...
请明确您所指的“优秀学生申请”是指申请什么？是指申请奖学金、荣誉称号、还是某个特定项目或学校的入学申请？请提供更多细节，以便我能更好地帮助您。

**正在进行第2轮思考**...

请明确说明你想了解的具体申请内容，例如是申请奖学金、荣誉称号、还是某个特定项目？这样我可以更准确地帮助你。

**没有检索到信息，尝试使用原始问题直接查询**...


**正在搜索: 优秀学生要如何申请**

**正在查询知识库**...
[双路径搜索] LLM评估: 精确查询结果更具体更有价值

**正在分析搜索结果**...

**找到相关信息！**
**Final Information**

优秀学生的申请条件和流程如下：

### 申请条件

#### 学术和综合素质要求
- 申请人必须是华东理工大学全日制在校二、三、四年级本科生。
- 学习成绩和综合素质评价成绩需达到85分及以上。
- 申请人需获得优秀奖学金二等奖及以上或民族班奖学金二等奖及以上。

#### 道德和行为要求
- 申请人必须热爱祖国，维护国家利益和民族团结，具有强烈的社会责任感，思想积极上进。
- 申请人需遵守法律法规和校纪校规，践行大学生行为准则，关心集体，热心公益，尊敬师长，团结同学，文明礼貌，诚实守信。

#### 其他要求
- 申请人需在2023-2024学年获得社会工作奖B等及以上。

### 申请流程

#### 个人申请
- 先进个人评选由个人申请，学生民主评议，按规定的比例推荐并上报先进事迹。
- 有关组织部门审核批准，确定获奖名单。

#### 在线申请
- 先进个人通过学工系统在线申请，由学生本人提出申请。
- 下载填写评审表模板，上传表格附件在线提交。
- 辅导员审核，在线填写意见并提交学院学生工作负责人。
- 审批通过后提交学工部并在学院范围内公示。

### 注意事项
- 同一学年只能选择一项申请。
- 特殊情况线下评选提交材料及汇总表格，后续导入系统。
- 申报系统开放时间为2024年10月15日—19日，逾期关闭。学院审核时间为2024年10月21日—28日。
- 辅导员需确保审核状态列表为空，如有非本学院学生，请及时联系相关学院或反馈学工部。

**正在进行第3轮思考**...

根据提供的信息，优秀学生申请的条件和流程如下：

### 申请条件

#### 学术和综合素质要求
- 申请人必须是华东理工大学全日制在校二、三、四年级本科生。
- 学习成绩和综合素质评价成绩需达到85分及以上。
- 申请人需获得优秀奖学金二等奖及以上或民族班奖学金二等奖及以上。

#### 道德和行为要求
- 申请人必须热爱祖国，维护国家利益和民族团结，具有强烈的社会责任感，思想积极上进。
- 申请人需遵守法律法规和校纪校规，践行大学生行为准则，关心集体，热心公益，尊敬师长，团结同学，文明礼貌，诚实守信。

#### 其他要求
- 申请人需在2023-2024学年获得社会工作奖B等及以上。

### 申请流程

#### 个人申请
- 先进个人评选由个人申请，学生民主评议，按规定的比例推荐并上报先进事迹。
- 有关组织部门审核批准，确定获奖名单。

#### 在线申请
- 先进个人通过学工系统在线申请，由学生本人提出申请。
- 下载填写评审表模板，上传表格附件在线提交。
- 辅导员审核，在线填写意见并提交学院学生工作负责人。
- 审批通过后提交学工部并在学院范围内公示。

### 注意事项
- 同一学年只能选择一项申请。
- 特殊情况线下评选提交材料及汇总表格，后续导入系统。
- 申报系统开放时间为2024年10月15日—19日，逾期关闭。学院审核时间为2024年10月21日—28日。
- 辅导员需确保审核状态列表为空，如有非本学院学生，请及时联系相关学院或反馈学工部。

总结来说，优秀学生申请需要满足学术、综合素质、道德行为等方面的要求，并按照规定的流程进行个人申请和在线申请。注意申请时间和流程中的各项要求，以确保申请顺利进行。

**没有发现新的查询角度，基于已有信息生成回答**...


**正在根据所有收集的信息生成最终答案**...
### 优秀学生申请条件和流程

#### 申请条件

**学术和综合素质要求**
- 必须是华东理工大学全日制在校二、三、四年级本科生。
- 学习成绩和综合素质评价成绩需达到85分及以上。
- 获得优秀奖学金二等奖及以上或民族班奖学金二等奖及以上。

**道德和行为要求**
- 热爱祖国，维护国家利益和民族团结，具有强烈的社会责任感，思想积极上进。
- 遵守法律法规和校纪校规，践行大学生行为准则，关心集体，热心公益，尊敬师长，团结同学，文明礼貌，诚实守信。

**其他要求**
- 在2023-2024学年获得社会工作奖B等及以上。

#### 申请流程

**个人申请**
- 先进个人评选由个人申请，学生民主评议，按规定的比例推荐并上报先进事迹。
- 有关组织部门审核批准，确定获奖名单。

**在线申请**
- 通过学工系统在线申请，由学生本人提出申请。
- 下载填写评审表模板，上传表格附件在线提交。
- 辅导员审核，在线填写意见并提交学院学生工作负责人。
- 审批通过后提交学工部并在学院范围内公示。

#### 注意事项
- 同一学年只能选择一项申请。
- 特殊情况线下评选提交材料及汇总表格，后续导入系统。
- 申报系统开放时间为2024年10月15日—19日，逾期关闭。学院审核时间为2024年10月21日—28日。
- 辅导员需确保审核状态列表为空，如有非本学院学生，请及时联系相关学院或反馈学工部。

总结来说，优秀学生申请需要满足学术、综合素质、道德行为等方面的要求，并按照规定的流程进行个人申请和在线申请。注意申请时间和流程中的各项要求，以确保申请顺利进行。

**补充信息**:

核心相关实体:
- ["学生", "国家奖学金", "全国学生资助管理中心"]: 
- "如何申请上海市奖学金",: 
- [: 

相关知识社区见解:
- 该信息摘要基于华东理工大学的学生贷款和奖学金管理体系，提供以下要点：

### 奖学金及资助类型：
1. **本科生国家励志奖学金**
   - 由中央政府资助，奖励品学兼优且家庭经济困难的全日制本科学生。
   - 评审由本科生奖学金评审领导小组及党委学生工作部（处）负责。
   - 获奖信息会被...

--- 标准版研究工具 ---
性能指标 - fast_cache_check: 0.8886s

**开始深度分析您的问题**...

**正在分析您的问题**...
请明确说明你所指的“优秀学生申请”是指申请什么？例如，是否是申请奖学金、申请入学、申请某个项目等。这样我可以更准确地帮助你。

**正在进行第2轮思考**...

请明确您所指的“优秀学生申请”是指申请什么？例如，您是指申请奖学金、荣誉称号、还是某个特定项目或计划？请提供更多详细信息，以便我能更好地帮助您。

**没有检索到信息，尝试使用原始问题直接查询**...


**正在搜索: 优秀学生要如何申请**

**正在查询知识库**...
[双路径搜索] LLM评估: 精确查询结果更具体更有价值

**正在分析搜索结果**...

**找到相关信息！**
**Final Information**

优秀学生的申请条件和流程如下：

### 申请条件
1. **学籍要求**：申请者必须是华东理工大学全日制在校二、三、四年级本科生。
2. **思想品德**：热爱祖国，维护国家利益和民族团结；社会责任感强；思想积极上进；遵守法律法规和校纪校规，践行大学生行为准则；关心集体，热心公益；尊敬师长，团结同学；文明礼貌，诚实守信。
3. **学术成绩**：2023-2024学年获得优秀奖学金二等奖及以上或民族班奖学金二等奖及以上，同时获社会工作奖B等及以上；综合素质评价成绩（德育分）85分及以上。

### 申请流程
1. **个人申请**：学生本人通过学工系统在线申请，下载并填写评审表模板，上传表格附件在线提交。
2. **辅导员审核**：辅导员审核申请，在线填写意见并提交学院学生工作负责人。
3. **学院审核**：学院学生工作负责人审批通过后提交学工部并在学院范围内公示。

### 注意事项
1. 同一学年只能选择一项申请。
2. 特殊情况线下评选提交材料及汇总表格，后续导入系统。
3. 提名后的名额不再递补。
4. 申报系统开放时间为2024年10月15日—19日，逾期关闭。学院审核时间为2024年10月21日—28日。
5. 辅导员需确保审核状态列表为空，如有非本学院学生，请及时联系相关学院或反馈学工部。

**正在进行第3轮思考**...

根据提供的信息，优秀学生的申请条件和流程如下：

### 申请条件
1. **学籍要求**：申请者必须是华东理工大学全日制在校二、三、四年级本科生。
2. **思想品德**：热爱祖国，维护国家利益和民族团结；社会责任感强；思想积极上进；遵守法律法规和校纪校规，践行大学生行为准则；关心集体，热心公益；尊敬师长，团结同学；文明礼貌，诚实守信。
3. **学术成绩**：2023-2024学年获得优秀奖学金二等奖及以上或民族班奖学金二等奖及以上，同时获社会工作奖B等及以上；综合素质评价成绩（德育分）85分及以上。

### 申请流程
1. **个人申请**：学生本人通过学工系统在线申请，下载并填写评审表模板，上传表格附件在线提交。
2. **辅导员审核**：辅导员审核申请，在线填写意见并提交学院学生工作负责人。
3. **学院审核**：学院学生工作负责人审批通过后提交学工部并在学院范围内公示。

### 注意事项
1. 同一学年只能选择一项申请。
2. 特殊情况线下评选提交材料及汇总表格，后续导入系统。
3. 提名后的名额不再递补。
4. 申报系统开放时间为2024年10月15日—19日，逾期关闭。学院审核时间为2024年10月21日—28日。
5. 辅导员需确保审核状态列表为空，如有非本学院学生，请及时联系相关学院或反馈学工部。

总结来说，优秀学生需要满足学籍、思想品德和学术成绩的要求，通过学工系统进行个人申请，辅导员和学院审核后，最终在学院范围内公示。申请过程中需要注意时间节点和材料提交的准确性。

**没有发现新的查询角度，基于已有信息生成回答**...


**正在根据所有收集的信息生成最终答案**...
[验证] 答案通过关键词相关性检查
### 优秀学生申请指南

#### 申请条件
1. **学籍要求**：申请者必须是华东理工大学全日制在校二、三、四年级本科生。
2. **思想品德**：热爱祖国，维护国家利益和民族团结；社会责任感强；思想积极上进；遵守法律法规和校纪校规，践行大学生行为准则；关心集体，热心公益；尊敬师长，团结同学；文明礼貌，诚实守信。
3. **学术成绩**：2023-2024学年获得优秀奖学金二等奖及以上或民族班奖学金二等奖及以上，同时获社会工作奖B等及以上；综合素质评价成绩（德育分）85分及以上。

#### 申请流程
1. **个人申请**：学生本人通过学工系统在线申请，下载并填写评审表模板，上传表格附件在线提交。
2. **辅导员审核**：辅导员审核申请，在线填写意见并提交学院学生工作负责人。
3. **学院审核**：学院学生工作负责人审批通过后提交学工部并在学院范围内公示。

#### 注意事项
1. 同一学年只能选择一项申请。
2. 特殊情况线下评选提交材料及汇总表格，后续导入系统。
3. 提名后的名额不再递补。
4. 申报系统开放时间为2024年10月15日—19日，逾期关闭。学院审核时间为2024年10月21日—28日。
5. 辅导员需确保审核状态列表为空，如有非本学院学生，请及时联系相关学院或反馈学工部。

总结来说，优秀学生需要满足学籍、思想品德和学术成绩的要求，通过学工系统进行个人申请，辅导员和学院审核后，最终在学院范围内公示。申请过程中需要注意时间节点和材料提交的准确性。

======= GraphAgent 流式输出 =======

 --- ask_stream方法 ---
性能指标 - fast_cache_check: 1.0749s
**正在分析问题**...

**正在检索相关信息**...

**正在生成回答**...

### 优秀学生申请流程

#### 申请条件

优秀学生的申请条件包括以下几点：
1. 申请者必须是华东理工大学全日制在校二、三、四年级本科生。
2. 热爱祖国，维护国家利益和民族团结，社会责任感强，思想积极上进。
3. 遵守法律法规和校纪校规，践行大学生行为准则，关心集体，热心公益，尊敬师长，团结同学，文明礼貌，诚实守信。
4. 2023-2024学年获得优秀奖学金二等奖及以上或民族班奖学金二等奖及以上，同时获社会工作奖B等及以上，综合素质评价成绩（德育分）85分及以上。

#### 申请步骤

1. **发布评选通知**：学校发布评选通知，启动评选程序。
2. **学生递交申请**：符合条件的学生根据通知要求递交奖学金申请。
3. **学院初评**：学院奖惩工作小组对申请材料进行初评，并将初评结果上报学校。
4. **学校评审**：本科生奖惩评审委员会对初评结果进行评审，确定最终获奖名单。
5. **公示与审批**：评审结果在全校范围内公示，接受监督。公示无异议后，报党委学生工作部审核，再报学校审批。
6. **发放奖金及证书**：审批通过后，学校发放奖金及证书。

#### 注意事项

1. 学年内无违法违纪行为。
2. 评选比例不超过学院班级总数的25%。
3. 申请国家奖学金的学生必须诚实守信，道德品质优良。
4. 申请国家奖学金的基本条件之一，要求申请人学习成绩和综合考评排名均位于前10%。

#### 引用数据

{'data': {'Entities':[1, 2, 3, 4, 9], 'Relationships':[3, 4, 5, 6, 9], 'Chunks':['43080aad12ef5620bd6e3abc00cc1d87dda24a19', '5cd3c5cacbf737e5303082255d96bc4079891dd4', 'e5437ee9f4f170f1c28f94f94bd6eda1becbfe0a'] } }

======= HybridAgent 流式输出 =======

 --- ask_stream方法 ---
性能指标 - fast_cache_check: 0.8438s
**正在分析问题**...

**正在检索相关信息**...

**正在生成回答**...

### 优秀学生申请条件

优秀学生的申请条件主要包括以下几个方面：

#### 学籍和年级要求
申请者必须是华东理工大学全日制在校二、三、四年级本科生，具有华东理工大学学籍。

#### 思想品德和行为规范
申请者需热爱祖国，维护国家利益和民族团结，具有强烈的社会责任感，思想积极上进。必须遵守法律法规和校纪校规，践行大学生行为准则，关心集体，热心公益，尊敬师长，团结同学，文明礼貌，诚实守信。

#### 学术和综合素质要求
申请者在2023-2024学年需获得优秀奖学金二等奖及以上或民族班奖学金二等奖及以上，同时获得社会工作奖B等及以上。综合素质评价成绩（德育分）需达到85分及以上。

#### 具体评选条件
优秀学生的具体评选条件包括德育考核成绩85分以上，获得综合奖学金二等奖（包括二等奖）以上，社会工作奖B等以上。

### 引用数据
{'data': {'Entities':[1, 2, 8, 9, 10], 'Reports':[1, 2, 3, 4, 5], 'Relationships':[2, 3], 'Chunks':['e5437ee9f4f170f1c28f94f94bd6eda1becbfe0a', '5cd3c5cacbf737e5303082255d96bc4079891dd4', '21e5ea85ad3357cd34a88570923b9c0fa5bd9734'] } }

======= NaiveRagAgent 流式输出 =======

 --- ask_stream方法 ---
性能指标 - fast_cache_check: 0.0000s
**开始处理查询**...

**已找到相关信息，正在生成回答**...

### 优秀学生申请奖学金的条件和流程

#### 申请条件

1. **基本条件**：
   - 具有中华人民共和国国籍。
   - 热爱社会主义祖国，拥护中国共产党的领导。
   - 遵守宪法和法律，遵守学校规章制度。
   - 诚实守信，道德品质优良。
   - 上一学年获得社会工作B等奖及以上或获得省（市）、部级及以上竞赛奖励。
   - 在校期间学习成绩优异，上一学年学习成绩排名与综合考评成绩排名均位于前10%（含10%）。

2. **特别优秀条件**：
   - 在社会主义精神文明建设中表现突出，具有见义勇为、助人为乐、奉献爱心、服务社会、自立自强的实际行动。
   - 在学术研究上取得显著成绩，以第一作者发表的高水平论文或出版学术专著。
   - 在学科竞赛方面取得显著成绩，获得国际和全国性竞赛一等奖（或金奖）。
   - 在创新发明方面取得显著成绩，科研成果获省（市）、部级以上奖励或获得国家专利。
   - 在体育竞赛中取得显著成绩，为国家争得荣誉。
   - 在艺术展演方面取得显著成绩，获得全国或省（市）级艺术展演一等奖。
   - 获得全国性荣誉称号，如全国十大杰出青年、中国青年五四奖章等。

#### 申请流程

1. **评审原则**：
   - 评审坚持公开、公平、公正、择优的原则，实行等额评审，每学年评审一次。

2. **评审组织**：
   - 学校成立本科生奖学金评审领导小组，设立评审委员会。评审领导小组由学校分管领导任组长，相关部门负责人为成员，全面领导评审工作。
   - 评审委员会由具有代表性的管理人员、专家学者和学生代表组成，具体负责评审工作，向评审领导小组提出奖学金评审意见。

3. **评审程序**：
   - 党委学生工作部（处）具体负责组织评审工作，提出当年奖学金获奖学生建议名单，报评审领导小组审定后，在校内进行不少于5个工作日的公示。
   - 公示无异议后，每年10月31日前，学校将评审结果报送全国学生资助管理中心。

4. **奖学金发放**：
   - 学校于每年12月31日前将当年奖学金一次性发放给获奖学生，并将获奖情况记入学生学籍档案。

### 引用数据
{'data': {'Chunks':['13345cdb8db69cb4ece7c5ad3034f860f7f4a80e','fcf6fad590274ee50036d48261761fdb8c45bf77','b4d039b55072d5898dc7a57a01bcea84de429514'] } }

======= FusionGraphRagAgent 流式输出 =======

 --- ask_stream方法 ---
性能指标 - fast_cache_check: 3.1949s
**正在分析问题和制定检索计划**...

**检索计划制定完成**
- 复杂度评估: 0.50
- 需要全局视图: 是
- 需要关系路径追踪: 是
- 包含时间相关内容: 否
- 涉及知识领域: 教育, 招生政策, 学生评估

**执行任务 1/5**: chain_exploration - 优秀学生的申请条件与评估标准的关系
**开始Chain of Exploration**...
- 探索路径:
  • 步骤0: 优秀学生
  • 步骤0: 申请条件
  • 步骤0: 评估标准
  • 步骤1: 优秀奖学金
  • 步骤2: 优秀学生干部
- 找到 6 条相关内容
✓ Chain of Exploration完成

**执行任务 2/5**: exploration - 不同教育机构的优秀学生评估标准
**开始深度探索**...
Building prefix dict from the default dictionary ...
Loading model from cache /tmp/jieba.cache
Loading model cost 0.670 seconds.
Prefix dict has been built successfully.
构建查询图谱完成，包含 5 个实体和 0 个关系，耗时 0.01秒
[双路径搜索] LLM评估: 精确查询结果更具体更有价值
[验证] 答案通过关键词相关性检查
✓ 深度探索完成

**执行任务 3/5**: local_search - 教育机构对优秀学生的定义
✓ 本地搜索完成

**执行任务 4/5**: local_search - 申请条件的具体要求
✓ 本地搜索完成

**执行任务 5/5**: global_search - 优秀学生的申请条件
✓ 全局搜索完成

**正在整合所有检索结果，生成最终答案**...



### 优秀学生的申请条件

根据综合检索和探索结果，优秀学生的申请条件主要包括以下几个方面：

#### 基本条件
1. **年级要求**：申请者必须是本科二、三、四年级的在校学生。
2. **思想政治**：申请者需热爱祖国，维护国家利益和民族团结，思想积极上进。
3. **行为规范**：申请者需遵守法律法规和校纪校规，践行大学生行为准则，关心集体，热心公益，尊敬师长，团结同学，文明礼貌，诚实守信。

#### 学术和综合素质
1. **奖学金要求**：申请者需获得优秀奖学金二等奖及以上或民族班奖学金二等奖及以上。
2. **综合素质评价**：申请者的综合素质评价成绩（德育分）需达到85分及以上。

#### 具体评选条件
1. **德育考核成绩**：申请者的德育考核成绩需达到85分以上。
2. **社会工作奖**：申请者需获得社会工作奖B等及以上。

#### 其他要求
1. **无违规违纪记录**：申请者需品德优良，无任何违规违纪记录。
2. **身心健康**：申请者需身心健康，能够正常参与学校的各项活动。

### 奖励与表彰
对表现优秀的学生进行表彰与奖励，包括授予三好学生称号、颁发奖学金等形式。优秀奖学金分为一、二、三等奖，奖励在学术和综合素质上表现优异的学生。

### 具体案例
以华东理工大学为例，其优秀学生的评估标准包括以下内容：
1. **年级要求**：在校二、三、四年级本科生。
2. **思想政治**：热爱祖国，维护国家利益和民族团结，思想积极上进。
3. **行为规范**：遵守法律法规和校纪校规，践行大学生行为准则，关心集体，热心公益，尊敬师长，团结同学，文明礼貌，诚实守信。
4. **奖学金要求**：获得优秀奖学金二等奖及以上或民族班奖学金二等奖及以上。
5. **综合素质评价**：综合素质评价成绩（德育分）85分及以上。
6. **德育考核成绩**：德育考核成绩85分以上。
7. **社会工作奖**：获得社会工作奖B等及以上。

### 结论
优秀学生的申请条件综合考虑了学生的学术成绩、思想政治素质、行为规范以及社会工作表现，旨在全面评估学生的综合素质和能力。不同教育机构可能会有细微的差异和具体的补充规定，但总体上，这些标准是评估优秀学生的主要依据。

### 参考文献
- 教育机构对优秀学生的定义和评估标准
- 申请条件的具体要求
- 华东理工大学学生先进个人和集体评选办法

通过以上信息，您可以全面了解优秀学生的申请条件，并根据具体教育机构的要求进行申请准备。
```

可以看到，由于嵌入的相似性原因，LLM有概率会把“优秀学生”（学校的荣誉称号）近似为“国家奖学金”（称号≠奖学金），这个问题需要后续的微调embedding来解决。

### 网页端演示

非调试模式下的问答：

![no-debug](./assets/web-nodebug.png)

调试模式下的问答（包含轨迹追踪（langgraph节点）、命中的知识图谱与文档源内容，知识图谱推理问答等）：

![debug1](./assets/web-debug1.png)

![debug2](./assets/web-debug2.png)

![debug3](./assets/web-debug3.png)

## 🔮 未来规划

1. **自动化数据获取**：
   - 加入定时爬虫功能，替代当前的手动文档更新方式
   - 实现资源自动发现与增量爬取

2. **图谱构建优化**：
   - 采用 GRPO 训练小模型支持图谱抽取
   - 降低当前 DeepResearch 进行图谱抽取/Chain of Exploration的成本与延迟

3. **领域特化嵌入**：
   - 解决语义相近但概念不同的术语区分问题
   - 优化如"优秀学生"vs"国家奖学金"、"过失杀人"vs"故意杀人"等的嵌入区分

4. **Agent 性能优化**：
   - 提升 Agent 框架响应速度
   - 优化多 Agent 协作机制

## 🙏 参考与致谢

- [GraphRAG](https://github.com/microsoft/graphrag) – 微软开源的知识图谱增强 RAG 框架  
- [llm-graph-builder](https://github.com/neo4j-labs/llm-graph-builder) – Neo4j 官方 LLM 建图工具  
- [LightRAG](https://github.com/HKUDS/LightRAG) – 轻量级知识增强生成方案  
- [deep-searcher](https://github.com/zilliztech/deep-searcher) – Zilliz团队开源的私域语义搜索框架  
- [ragflow](https://github.com/infiniflow/ragflow) – 企业级 RAG 系统